/*! For license information please see main.e8487eaf.chunk.js.LICENSE.txt */
(this.webpackJsonpeda_new=this.webpackJsonpeda_new||[]).push([[0],{207:function(e,t,n){},254:function(e,t,n){},255:function(e,t,n){},261:function(e,t,n){},281:function(e,t,n){},282:function(e,t,n){},283:function(e,t,n){},284:function(e,t,n){},285:function(e,t,n){},287:function(e,t,n){},360:function(e,t,n){},425:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),s=n(38),o=n.n(s),i=(n(254),n(25)),l=n(8),u=n(35),d=n(21),j=Object(r.createContext)({UserData:null,isLoggedIn:!1,Department:null,Role:null,login:function(){},logout:function(){},UserName:null}),b=n(97),p=(n(255),n(2)),h=function(e){return"light"===e.mode?Object(p.jsx)("div",{className:"main-header",children:e.children}):Object(p.jsx)("div",{className:"main-header-dark",children:e.children})},x=n(60),f=n(102),O=n(104),g=(n(261),"token"),m=function(e){localStorage.setItem(g,e)},v=function(){return localStorage.getItem(g)},y=function(e){localStorage.removeItem(g)},k=n(39),S=n.n(k),w={local:window.location.origin+"/api"}.local,D=function(e){return S.a.create({baseURL:"".concat(w,"/RecentReports/").concat(e)})},I=S.a.create({baseURL:"".concat(w,"/Scheduler/list")}),U=S.a.create({baseURL:"".concat(w,"/Scheduler/addschedule")}),R=S.a.create({baseURL:"".concat(w,"/Scheduler/updateschedule")}),C=S.a.create({baseURL:"".concat(w,"/Scheduler/deleteschedule")}),L=S.a.create({baseURL:"".concat(w,"/Scheduler/localpath")}),T=S.a.create({baseURL:"".concat(w,"/Scheduler/getgrouplist")}),A=function(e,t){return S.a.create({baseURL:"".concat(w,"/Report/").concat(e,"/").concat(t)})},B=S.a.create({baseURL:"".concat(w,"/Account/login")}),z=S.a.create({baseURL:"".concat(w,"/Account/isAuthenticated")}),E=S.a.create({baseURL:"".concat(w,"/Account/refresh-token")}),N=(S.a.create({baseURL:"".concat(w,"/Account/logout")}),S.a.create({baseURL:"".concat(w,"/Account/add")})),F=S.a.create({baseURL:"".concat(w,"/Account/authorize")}),M=S.a.create({baseURL:"".concat(w,"/Account/getuserinfo")}),V=S.a.create({baseURL:"".concat(w,"/Account/getgroupinfo")}),P=S.a.create({baseURL:"".concat(w,"/Account/assigngroup")}),_=S.a.create({baseURL:"".concat(w,"/Account/adddepartment")}),G=S.a.create({baseURL:"".concat(w,"/Account/addgroup")}),H=S.a.create({baseURL:"".concat(w,"/Account/updategroup")}),W=S.a.create({baseURL:"".concat(w,"/Account/deletegroup")}),Y=function(e){var t,n,a=Object(u.g)(),c=Object(r.useContext)(j),s=Object(r.useState)("none"),o=Object(l.a)(s,2),i=o[0],b=o[1],h={backgroundColor:"#0081a7",padding:"0.5rem",fontSize:"1.1rem",color:"white",fontWeight:"800",display:"".concat(i)};return c.isLoggedIn&&"Admin"===c.Department?(t="light"===e.mode?"nav-links":"nav-links dark",Object(p.jsxs)("ul",{className:t,children:[Object(p.jsxs)("div",{style:{display:"flex",position:"fixed",left:"calc(170px)"},children:[Object(p.jsx)("li",{children:Object(p.jsx)(d.c,{exact:!0,to:"/",children:"HOME"})}),Object(p.jsx)("li",{children:Object(p.jsx)(d.c,{to:"/scheduler",children:"SCHEDULER"})}),Object(p.jsx)("li",{children:Object(p.jsx)(d.c,{to:"/report",children:"REPORT"})}),Object(p.jsx)("li",{children:Object(p.jsx)(d.c,{to:"/authority",children:"AUTHORITY"})})]}),Object(p.jsx)(x.a,{placement:"bottom",title:Object(p.jsx)("span",{children:"Logout"}),children:Object(p.jsxs)("div",{style:{display:"flex",boxShadow:"0 6px 10px rgba(0, 0, 0, 0.26)",cursor:"pointer"},onClick:function(){c.logout(),a.push("/")},children:[Object(p.jsxs)("div",{style:{backgroundColor:"#00afb9",paddingTop:"0.4rem",paddingBottom:"0.4rem",paddingLeft:"0.4rem",paddingRight:"0.8rem",color:"white",fontSize:"1.1rem",fontWeight:600},onMouseEnter:function(){return b("block")},onMouseLeave:function(){return b("none")},children:[Object(p.jsx)(f.a,{icon:O.c,size:"lg",style:{marginRight:"8px",marginLeft:"5px"}}),c.UserName]}),Object(p.jsx)("div",{style:h,onMouseEnter:function(){return b("block")},onMouseLeave:function(){return b("none")},children:Object(p.jsx)(f.a,{icon:O.b})})]})})]})):c.isLoggedIn&&"Admin"!==c.Department?(n="light"===e.mode?"nav-links":"nav-links dark",Object(p.jsxs)("ul",{className:n,children:[Object(p.jsxs)("div",{style:{display:"flex",position:"fixed",left:"calc(170px)"},children:[Object(p.jsx)("li",{children:Object(p.jsx)(d.c,{exact:!0,to:"/",children:"HOME"})}),Object(p.jsx)("li",{children:Object(p.jsx)(d.c,{to:"/scheduler",children:"SCHEDULER"})}),Object(p.jsx)("li",{children:Object(p.jsx)(d.c,{to:"/report",children:"REPORT"})}),"Leader"===c.Role?Object(p.jsx)("li",{children:Object(p.jsx)(d.c,{to:"/authority",children:"AUTHORITY"})}):null]}),Object(p.jsx)(x.a,{placement:"bottom",title:Object(p.jsx)("span",{children:"Logout"}),children:Object(p.jsxs)("div",{style:{display:"flex",boxShadow:"0 6px 10px rgba(0, 0, 0, 0.26)",cursor:"pointer"},onClick:function(){c.logout(),a.push("/")},children:[Object(p.jsxs)("div",{style:{backgroundColor:"#00afb9",paddingTop:"0.4rem",paddingBottom:"0.4rem",paddingLeft:"0.4rem",paddingRight:"0.8rem",color:"white",fontSize:"1.1rem",fontWeight:600},onMouseEnter:function(){return b("block")},onMouseLeave:function(){return b("none")},children:[Object(p.jsx)(f.a,{icon:O.c,size:"lg",style:{marginRight:"8px",marginLeft:"5px"}}),c.UserName]}),Object(p.jsx)("div",{style:h,onMouseEnter:function(){return b("block")},onMouseLeave:function(){return b("none")},children:Object(p.jsx)(f.a,{icon:O.b})})]})})]})):Object(p.jsx)(p.Fragment,{})},K=(n(281),n.p+"static/media/konka_logo.e8f57cb2.png"),q=n(98),X=n.p+"static/media/back24-unsplash.142c11ba.jpg",J=Object(q.a)(a||(a=Object(b.a)(["\n  body {\n    background:url(",");\n    background-size:cover;\n    background-color:#FAFAFA\n  }\n"])),(function(e){return e.imgUrl})),Q=function(e){var t=e.login,n=Object(r.useState)("light"),a=Object(l.a)(n,2),s=a[0],o=a[1];return Object(p.jsxs)(c.a.Fragment,{children:[t?Object(p.jsx)(J,{imgUrl:null}):Object(p.jsx)(J,{imgUrl:X}),t&&Object(p.jsxs)(h,{mode:s,children:[Object(p.jsx)("h1",{className:"main-navigation__title",children:Object(p.jsx)(d.b,{to:"/",children:Object(p.jsx)("img",{src:K,alt:"",style:{width:"15%",float:"left"}})})}),Object(p.jsx)("nav",{className:"main-navigation__header-nav",children:Object(p.jsx)(Y,{mode:s,setMode:o})})]})]})},$=n(13),Z=n.n($),ee=n(23),te=(n(282),function(e){return Object(p.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}),ne=n(232),ae="REQUIRE",re="MINLENGTH",ce="MAXLENGTH",se="EMAIL",oe=function(){return{type:ae}},ie=function(e){return{type:re,val:e}},le=function(e,t){var n,a=!0,r=Object(ne.a)(t);try{for(r.s();!(n=r.n()).done;){var c=n.value;c.type===ae&&(a=a&&e.trim().length>0),c.type===re&&(a=a&&e.trim().length>=c.val),c.type===ce&&(a=a&&e.trim().length<=c.val),"MIN"===c.type&&(a=a&&+e>=c.val),"MAX"===c.type&&(a=a&&+e<=c.val),c.type===se&&(a=a&&/^\S+@\S+\.\S+$/.test(e))}}catch(s){r.e(s)}finally{r.f()}return a},ue=n(442),de=n(443),je=n(444),be=n(248),pe=n(239),he=(n(283),function(e,t){switch(t.type){case"CHANGE":return Object(i.a)(Object(i.a)({},e),{},{value:t.val,isValid:le(t.val,t.validators)});case"TOUCH":return Object(i.a)(Object(i.a)({},e),{},{isTouched:!0});default:return e}}),xe=function(e){var t=Object(r.useReducer)(he,{value:e.initialValue||"",isTouched:!1,isValid:e.initialValid||!1}),n=Object(l.a)(t,2),a=n[0],c=n[1],s=e.id,o=e.onInput,i=e.className,u=a.value,d=a.isValid;Object(r.useEffect)((function(){o(s,u,d)}),[s,d,o,u]);var j=function(){c({type:"TOUCH"})},b=function(t){c({type:"CHANGE",val:t.target.value,validators:e.validators})},h="input"===e.element?"text"===e.type?Object(p.jsx)(pe.a,{id:e.id,type:e.type,placeholder:e.placeholder,onChange:b,onBlur:j,value:a.value,prefix:Object(p.jsx)(ue.a,{className:"site-form-item-icon"}),size:"large",autoFocus:e.autofocus}):Object(p.jsx)(pe.a.Password,{id:e.id,type:e.type,placeholder:e.placeholder,onChange:b,onBlur:j,value:a.value,prefix:Object(p.jsx)(de.a,{}),size:"large",iconRender:function(e){return e?Object(p.jsx)(je.a,{}):Object(p.jsx)(be.a,{})}}):Object(p.jsx)("textarea",{id:e.id,rows:e.rows,onChange:b,onBlur:j,value:a.value});return Object(p.jsxs)("div",{className:"form-control ".concat(!a.isValid&&a.isTouched&&"form-control--invalid"," ").concat(i&&i),children:[Object(p.jsx)("label",{htmlFor:e.id,style:{textAlign:"left"},children:e.label}),h,!a.isValid&&a.isTouched&&Object(p.jsx)("p",{children:e.errorText})]})},fe=(n(284),function(e){return e.href?Object(p.jsx)("a",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),href:e.href,children:e.children}):e.to?Object(p.jsx)(d.b,{to:e.to,exact:e.exact,className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"),children:e.children}):Object(p.jsx)("button",{className:"button button--".concat(e.size||"default"," ").concat(e.inverse&&"button--inverse"," ").concat(e.danger&&"button--danger"," ").concat(e.className&&e.className),type:e.type,onClick:e.onClick,disabled:e.disabled,children:e.children})}),Oe=n(147),ge=function(e,t){switch(t.type){case"INPUT_CHANGE":var n=!0;for(var a in e.inputs)n=a===t.inputId?n&&t.isValid:n&&e.inputs[a].isValid;return Object(i.a)(Object(i.a)({},e),{},{inputs:Object(i.a)(Object(i.a)({},e.inputs),{},Object(Oe.a)({},t.inputId,{value:t.value,isValid:t.isValid})),isValid:n});case"SET_FORM_DATA":return{inputs:t.inputs,isValid:t.isValid};default:return e}},me=function(e,t){var n=Object(r.useReducer)(ge,{inputs:e,isValid:t}),a=Object(l.a)(n,2),c=a[0],s=a[1];return[c,Object(r.useCallback)((function(e,t,n){s({type:"INPUT_CHANGE",inputId:e,value:t,isValid:n})}),[]),Object(r.useCallback)((function(e,t){s({type:"SET_FORM_DATA",inputs:e,isValid:t})}),[])]},ve=n(245),ye=(n(285),["isLoading","height"]),ke=function(){return Object(p.jsx)("div",{className:"spinner-container"})},Se=function(e){return function(t){var n=t.isLoading,a=t.height,r=Object(ve.a)(t,ye);return n?Object(p.jsx)("div",{className:"spinner-overlay",style:{height:a&&a},children:Object(p.jsx)("div",{className:"spinner-container"})}):Object(p.jsx)(e,Object(i.a)({},r))}},we=n(433),De=n.p+"static/media/konka.5b068042.jpeg",Ie=(n.p,function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,n,a,r,c,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v(),n={headers:{authorization:"Bearer ".concat(t)}},e.prev=2,e.next=5,z.get("",n);case 5:return a=e.sent,e.abrupt("return",a);case 9:if(e.prev=9,e.t0=e.catch(2),console.log(e.t0,e.t0.response.status,e.t0.config),r=e.t0.config,401!==e.t0.response.status||r._retry){e.next=25;break}return e.prev=14,e.next=17,E.post("",{refreshtoken:t},n);case 17:c=e.sent,s=c.data.AccessToken,m(s),e.next=25;break;case 22:return e.prev=22,e.t1=e.catch(14),e.abrupt("return",Promise.reject(e.t1));case 25:case"end":return e.stop()}}),e,null,[[2,9],[14,22]])})));return function(){return e.apply(this,arguments)}}()),Ue=(n(207),function(){var e=Object(u.g)(),t=Object(r.useContext)(j),n=Object(r.useState)(!1),a=Object(l.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(""),i=Object(l.a)(o,2),b=i[0],h=i[1],x=me({account:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),f=Object(l.a)(x,2),O=f[0],g=f[1],v=function(){var n=Object(ee.a)(Z.a.mark((function n(a){var r,c,o,i,l;return Z.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),r=O.inputs,c=r.account,o=r.password,i={AccountName:c.value,password:o.value},n.prev=3,s(!0),n.next=7,B.post("",i);case 7:(l=n.sent)&&l.data?(200!==l.data.status&&h("\u5e33\u865f\u6216\u5bc6\u78bc\u8f38\u5165\u932f\u8aa4"),m(l.data.AccessToken),Ie().then((function(n){200!==n.status?(y(),t.logout()):(t.login(l.data.Department,l.data.Role,l.data.AccountName,l.data),e.push("/"))}))):(h("\u5e33\u865f\u6216\u5bc6\u78bc\u8f38\u5165\u932f\u8aa4"),setTimeout((function(){h("")}),3e3),s(!1)),n.next=17;break;case 11:n.prev=11,n.t0=n.catch(3),console.log(n.t0),h("\u5e33\u865f\u6216\u5bc6\u78bc\u8f38\u5165\u932f\u8aa4"),setTimeout((function(){h("")}),3e3),s(!1);case 17:case"end":return n.stop()}}),n,null,[[3,11]])})));return function(e){return n.apply(this,arguments)}}();return Object(p.jsxs)(te,{className:"authentication",children:[Object(p.jsx)("img",{src:De,alt:"",style:{width:"50%",paddingTop:"5%"}}),Object(p.jsx)(we.a,{component:"h3",variant:"h5",children:"Engineering Data Analysis"}),Object(p.jsx)("h2",{children:"\u767b\u5165\u4ecb\u9762"}),b&&Object(p.jsx)("h4",{className:"authentication__error",children:b}),c?Object(p.jsx)(ke,{}):Object(p.jsxs)("form",{className:"authentication__form",onSubmit:v,children:[Object(p.jsx)(xe,{id:"account",type:"text",element:"input",validators:[oe(),ie(4)],errorText:"\u6700\u5c11\u56db\u500b\u5b57\u5143",onInput:g,placeholder:"\u8acb\u8f38\u5165\u5e33\u865f"}),Object(p.jsx)(xe,{id:"password",type:"password",element:"input",validators:[oe(),ie(4)],errorText:"\u6700\u5c11\u56db\u500b\u5b57\u5143",onInput:g,style:{width:"100%"},placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc"}),Object(p.jsx)(fe,{className:"authentication__form__login",type:"submit",disabled:!O.isValid,children:"\u767b\u5165"}),Object(p.jsx)(d.b,{to:"/register",children:Object(p.jsx)("p",{children:"\u6211\u8981\u8a3b\u518a"})})]})]})}),Re=(n(287),n(246)),Ce=n(240),Le=n(41),Te=n(428),Ae=n(247),Be=n(445),ze=n(446),Ee=function(e){var t=e.changeData,n=(e.fetchingDataAsync,e.setScheduleData),a=e.setUserData,r=e.setIsLoggedIn,c=e.setUserRole,s=function(e){var n;0!==t.length&&(n=t[0].name),Re.a[e]({message:"\u901a\u77e5",description:"".concat(n,"\u5df2\u522a\u9664"),placement:"bottomLeft"})},o=Object(u.g)(),i=v(),l={headers:{authorization:"Bearer ".concat(i)}},j=function(){var e=Object(ee.a)(Z.a.mark((function e(){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={name:t[0].name},e.prev=1,e.next=4,C.post("",n,l).then((function(e){b(),s("success")})).catch((function(e){console.log(e),401===e.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),a(null),r(!1),c(null),o.push("/"))}));case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("",l);case 3:(t=e.sent).data&&(s=t.data.List.map((function(e,t){return e.key=t,e})),n(s)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),a(null),r(!1),c(null),o.push("/"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{style:{float:"right",margin:"auto auto 3em auto",justifyContent:"space-between",marginRight:"5%"},children:[Object(p.jsx)(d.c,{to:{pathname:"/scheduler/add"},children:Object(p.jsx)(Le.a,{size:"large",style:{backgroundColor:"#1CC153",borderRadius:"5px",color:"white",marginRight:"10px"},icon:Object(p.jsx)(Ae.a,{}),children:"ADD"},"3")}),Object(p.jsx)(d.c,{to:{pathname:"/scheduler/edit",state:{changeData:t}},children:Object(p.jsx)(Le.a,{size:"large",type:"primary",style:{borderRadius:"5px",marginRight:"10px"},disabled:0===t.length,icon:Object(p.jsx)(Be.a,{}),children:"EDIT"},"2")}),Object(p.jsx)(Te.a,{placement:"topLeft",title:"\u662f\u5426\u78ba\u5b9a\u522a\u9664?",onConfirm:function(e){return j(e)},okText:"\u78ba\u5b9a",cancelText:"\u53d6\u6d88",children:Object(p.jsx)(Le.a,{style:{borderRadius:"5px",marginRight:"10px"},size:"large",type:"danger",disabled:0===t.length,icon:Object(p.jsx)(ze.a,{}),children:"DELETE"},"1")})]})},Ne=n(441),Fe=n(430),Me=n(116),Ve=n.n(Me),Pe=n(124);function _e(e,t,n){return n.indexOf(e)===t}var Ge=function(e){var t,n=e.setChangeData,a=e.scheduleData,c=a.map((function(e){return e.department})).filter(_e).map((function(e){return{text:e,value:e}})),s=a.map((function(e){return e.group})).filter(_e).map((function(e){return{text:e,value:e}})),o=Object(r.useState)("radio"),u=Object(l.a)(o,2),d=u[0],j=(u[1],Object(r.useState)([])),b=Object(l.a)(j,2),h=b[0],x=b[1],f=a.length,O={selectedRowKeys:h,selectedRows:[],onChange:function(e,t){n(t),x(e)}},g=Object(r.useState)(""),m=Object(l.a)(g,2),v=m[0],y=m[1],k=Object(r.useState)(""),S=Object(l.a)(k,2),w=S[0],D=S[1],I=Object(r.useRef)(null),U=function(e,t,n){t(),y(e[0]),D(n)},R=[Object(i.a)({title:"Description Name",dataIndex:"name"},(t="name",{filterDropdown:function(e){var n=e.setSelectedKeys,a=e.selectedKeys,r=e.confirm,c=e.clearFilters;return Object(p.jsxs)("div",{style:{padding:8},children:[Object(p.jsx)(pe.a,{ref:I,placeholder:"Search ".concat(t),value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return U(a,r,t)},style:{marginBottom:8,display:"block"}}),Object(p.jsxs)(Ne.b,{children:[Object(p.jsx)(Le.a,{type:"primary",onClick:function(){return U(a,r,t)},icon:Object(p.jsx)(Pe.a,{}),size:"small",style:{width:90},children:"Search"}),Object(p.jsx)(Le.a,{onClick:function(){return function(e){e(),y("")}(c)},size:"small",style:{width:90},children:"Reset"}),Object(p.jsx)(Le.a,{type:"link",size:"small",onClick:function(){r({closeDropdown:!1}),y(a[0]),D(t)},children:"Filter"})]})]})},filterIcon:function(e){return Object(p.jsx)(Pe.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,n){return n[t]?n[t].toString().toLowerCase().includes(e.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return I.current.select()}),100)},render:function(e){return w===t?Object(p.jsx)(Ve.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[v],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{title:"Department",dataIndex:"department",filters:c,onFilter:function(e,t){return 0===t.department.indexOf(e)}},{title:"Group",dataIndex:"group",filters:s,onFilter:function(e,t){return 0===t.group.indexOf(e)}},{title:"Script",dataIndex:"script"},{title:"Frequency",dataIndex:"frequency",filters:[{text:"By Day",value:"By day"},{text:"By Week",value:"By week"},{text:"By Month",value:"By month"}],onFilter:function(e,t){return 0===t.frequency.indexOf(e)}},{title:"Time Settings",dataIndex:"timesetting",render:function(e,t){return"By month"===t.frequency?"\u6bcf\u6708\u7b2c"+t.dayindex+"\u5929 - "+t.timesetting:"By week"===t.frequency?"\u6bcf\u9031"+t.dayindex+" - "+t.timesetting:"\u6bcf\u65e5"+t.timesetting}},{title:"Detail",dataIndex:"scriptpath",render:function(e,t){if("Script is not exist."===e)return e}}];return Object(p.jsx)(Fe.a,{scroll:{x:"100%"},style:{width:"90%",margin:"auto",textAlign:"center",borderStyle:"solid",borderColor:"lightgrey",borderWidth:"1px",marginBottom:"50px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.26)"},rowSelection:Object(i.a)({type:d},O),pagination:{position:["bottomCenter"],pageSize:8,total:f,showTotal:function(e){return"Total ".concat(e," scripts")}},columns:R,dataSource:a,rowKey:function(e){return e.key},onRow:function(e){return{onClick:function(){x([e.key]),n([e])}}}})},He=n(434),We=n(439),Ye=n(50),Ke=n(241),qe=function(e){var t,n=e.title,a=Object(r.useContext)(j);return Object(p.jsxs)(Ke.a,{children:[Object(p.jsx)(Ke.a.Item,{children:Object(p.jsx)(d.c,{to:"/",children:"Home"})}),Object(p.jsx)(Ke.a.Item,{overlay:(t=a.Role,Object(p.jsxs)(Ye.a,{children:[Object(p.jsx)(Ye.a.Item,{children:Object(p.jsx)(d.c,{to:"/scheduler",children:"Scheduler"})}),Object(p.jsx)(Ye.a.Item,{children:Object(p.jsx)(d.c,{to:"/report",children:"Report"})}),"Admin"===t&&Object(p.jsx)(Ye.a.Item,{children:Object(p.jsx)(d.c,{to:"/authority",children:"Authority"})})]})),children:Object(p.jsx)(d.c,{to:"/scheduler",children:"Scheduler"})}),"Scheduler-Add"===n&&Object(p.jsx)(Ke.a.Item,{children:"Add"}),"Scheduler-Edit"===n&&Object(p.jsx)(Ke.a.Item,{children:"Edit"})]})},Xe=function(e){var t=e.title;return Object(p.jsx)(He.a,{style:{width:"50%",margin:"auto auto auto 5em"},title:Object(p.jsx)("h2",{children:t}),children:Object(p.jsx)(We.b,{size:"small",column:2,children:Object(p.jsx)(We.b.Item,{children:Object(p.jsx)(qe,{title:t})})})})},Je=function(e){var t=Object(r.useState)(null),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useCallback)(Object(ee.a)(Z.a.mark((function t(){var n;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.get("");case 3:n=t.sent,c(n.data),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),[e]);return Object(r.useEffect)((function(){s()}),[s]),[a,s,c]},Qe=Se(Ge),$e=function(e){var t=e.setUserData,n=e.setIsLoggedIn,a=e.setUserRole,c=Object(r.useState)([]),s=Object(l.a)(c,2),o=s[0],i=s[1],d=Object(r.useState)(),b=Object(l.a)(d,2),h=b[0],x=b[1],f=Object(r.useContext)(j),O=Object(u.g)();return Object(r.useEffect)((function(){var e=v(),r={headers:{authorization:"Bearer ".concat(e)}};(function(){var e=Object(ee.a)(Z.a.mark((function e(){var c,s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,I.get("",r);case 3:(c=e.sent).data&&(s=c.data.List.map((function(e,t){return e.key=t,e})),x(s)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),t(null),n(!1),a(null),O.push("/"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[f,t,n,a,O]),Object(p.jsxs)("div",{style:{width:"90%"},children:[Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsx)(Xe,{title:"Scheduler",back:!1}),Object(p.jsx)(Ee,{changeData:o,setScheduleData:x,setUserData:t,setIsLoggedIn:n,setUserRole:a})]}),Object(p.jsx)(Qe,{isLoading:!h,setChangeData:i,scheduleData:h})]})},Ze=function(e){var t,n=e.title,a=Object(r.useContext)(j);return Object(p.jsxs)(Ke.a,{children:[Object(p.jsx)(Ke.a.Item,{children:Object(p.jsx)(d.c,{to:"/",children:"Home"})}),"Recent Reports"!==n&&Object(p.jsx)(Ke.a.Item,{overlay:(t=a.Role,Object(p.jsxs)(Ye.a,{children:[Object(p.jsx)(Ye.a.Item,{children:Object(p.jsx)(d.c,{to:"/scheduler",children:"Scheduler"})}),Object(p.jsx)(Ye.a.Item,{children:Object(p.jsx)(d.c,{to:"/report",children:"Report"})}),"Admin"===t&&Object(p.jsx)(Ye.a.Item,{children:Object(p.jsx)(d.c,{to:"/authority",children:"Authority"})})]})),children:Object(p.jsx)(d.c,{to:"/report",children:"Report"})})]})},et=function(e){var t=e.title;e.back;return Object(p.jsx)(He.a,{style:{width:"50%",margin:"auto auto auto 5em"},title:Object(p.jsx)("h2",{children:t}),children:Object(p.jsx)(We.b,{size:"small",column:2,children:Object(p.jsx)(We.b.Item,{children:Object(p.jsx)(Ze,{title:t})})})})};function tt(e,t,n){return n.indexOf(e)===t}var nt,at,rt=function(e){var t,n=e.data,a=e.setChangeData,c=e.nongId,s=e.setNongId,o=n.length,u=Object(r.useState)("radio"),d=Object(l.a)(u,2),j=d[0],b=(d[1],{selectedRowKeys:c,selectedRows:[],onChange:function(e,t){a(t),s(e)},getCheckboxProps:function(e){return{disabled:"Disabled User"===e.name,name:e.name}}}),h=Object(r.useState)(""),x=Object(l.a)(h,2),f=x[0],O=x[1],g=Object(r.useState)(""),m=Object(l.a)(g,2),v=m[0],y=m[1],k=Object(r.useRef)(null),S=function(e,t,n){t(),O(e[0]),y(n)},w=n.map((function(e){return e.department})).filter(tt).map((function(e){return{text:e,value:e}})),D=n.map((function(e){return e.group})).filter(tt).map((function(e){return{text:e,value:e}})),I=[Object(i.a)({title:"Description Name",dataIndex:"name"},(t="name",{filterDropdown:function(e){var n=e.setSelectedKeys,a=e.selectedKeys,r=e.confirm,c=e.clearFilters;return Object(p.jsxs)("div",{style:{padding:8},children:[Object(p.jsx)(pe.a,{ref:k,placeholder:"Search ".concat(t),value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return S(a,r,t)},style:{marginBottom:8,display:"block"}}),Object(p.jsxs)(Ne.b,{children:[Object(p.jsx)(Le.a,{type:"primary",onClick:function(){return S(a,r,t)},icon:Object(p.jsx)(Pe.a,{}),size:"small",style:{width:90},children:"Search"}),Object(p.jsx)(Le.a,{onClick:function(){return function(e){e(),O("")}(c)},size:"small",style:{width:90},children:"Reset"}),Object(p.jsx)(Le.a,{type:"link",size:"small",onClick:function(){r({closeDropdown:!1}),O(a[0]),y(t)},children:"Filter"})]})]})},filterIcon:function(e){return Object(p.jsx)(Pe.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,n){return n[t]?n[t].toString().toLowerCase().includes(e.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return k.current.select()}),100)},render:function(e){return v===t?Object(p.jsx)(Ve.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[f],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{title:"Department",dataIndex:"department",filters:w,onFilter:function(e,t){return 0===t.department.indexOf(e)}},{title:"Group",dataIndex:"group",filters:D,onFilter:function(e,t){return 0===t.group.indexOf(e)}},{title:"Script",dataIndex:"script"},{title:"Frequency",dataIndex:"frequency",filters:[{text:"By Day",value:"By day"},{text:"By Week",value:"By week"},{text:"By Month",value:"By month"}],onFilter:function(e,t){return 0===t.frequency.indexOf(e)}},{title:"Time Settings",dataIndex:"time"}];return Object(p.jsx)("div",{children:Object(p.jsx)(Fe.a,{scroll:{x:"100%"},style:{width:"90%",margin:"auto",textAlign:"center",borderStyle:"solid",borderColor:"lightgrey",borderWidth:"1px",marginBottom:"50px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.26)"},rowSelection:Object(i.a)({type:j},b),columns:I,dataSource:n,pagination:{position:["bottomCenter"],pageSize:8,total:o,showTotal:function(e){return"Total ".concat(e," scripts")}},onRow:function(e){return{onClick:function(){s(e.key),a([e])}}}})})},ct=n(447),st=[{title:"SN",dataIndex:"sn"},{title:"File Name",dataIndex:"filename"},{title:"Update Time",dataIndex:"updatetime"},{title:"Report",dataIndex:"HtmlPath",render:function(e){return Object(p.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:Object(p.jsx)(ct.a,{})})}}],ot=function(e){var t=e.changeData,n=e.startTime,a=e.endTime,r=0===t.length?0:t[0].detail.length,c=0===t.length?[]:t[0].detail.map((function(e,t){return e.key=t,e}));return Object(p.jsx)("div",{children:Object(p.jsx)(Fe.a,{scroll:{x:"100%"},style:{width:"90%",margin:"auto",textAlign:"center",borderStyle:"solid",borderColor:"lightgrey",borderWidth:"1px",marginBottom:"50px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.26)"},title:function(){return 0!==t.length?0===t[0].detail.length?"No report detail between ".concat(n," - ").concat(a):"".concat(t[0].name," Details"):null},bordered:!0,pagination:{position:["bottomCenter"],pageSize:8,total:r,showTotal:function(e){return"Total ".concat(e," files")}},columns:st,dataSource:c})})},it=n(194),lt=n(49),ut=n.n(lt),dt=it.a.RangePicker,jt="YYYYMMDD",bt=function(e){var t=e.startTime,n=e.setStartTime,a=e.endTime,r=e.setEndTime;return Object(p.jsx)("div",{style:{float:"right",margin:"auto auto 3em auto",justifyContent:"space-between",marginRight:"5%"},children:Object(p.jsx)(dt,{defaultValue:[ut()(t,jt),ut()(a,jt)],size:"large",format:"YYYY-MM-DD",onChange:function(e,t){null!==e&&(n(e[0].format(jt)),r(e[1].format(jt)))}})})},pt="YYYYMMDD",ht=function(e){var t=e.setUserData,n=e.setIsLoggedIn,a=e.setUserRole,c=e.setUserDepartment,s=Object(r.useContext)(j),o=Object(r.useState)([]),i=Object(l.a)(o,2),d=i[0],b=i[1],h=Object(r.useState)([]),x=Object(l.a)(h,2),f=x[0],O=x[1],g=Object(r.useState)(ut()().subtract(30,"days").format(pt)),m=Object(l.a)(g,2),k=m[0],S=m[1],w=Object(r.useState)(ut()().format(pt)),D=Object(l.a)(w,2),I=D[0],U=D[1],R=Object(u.g)(),C=Object(r.useState)([]),L=Object(l.a)(C,2),T=L[0],B=L[1];return Object(r.useEffect)((function(){var e=v(),r={headers:{authorization:"Bearer ".concat(e)}};(function(){var e=Object(ee.a)(Z.a.mark((function e(){var s;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A(k,I).get("",r);case 3:(s=e.sent).data&&(B([]),O([]),b(s.data.data)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),t(null),n(!1),c(null),a(null),R.push("/"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[k,I,s,R,t,n,a,c]),Object(p.jsxs)("div",{style:{width:"90%"},children:[Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsx)(et,{title:"Report",back:!1}),Object(p.jsx)(bt,{startTime:k,setStartTime:S,endTime:I,setEndTime:U})]}),Object(p.jsx)(rt,{data:d,setChangeData:O,nongId:T,setNongId:B}),Object(p.jsx)(ot,{changeData:f,startTime:k,endTime:I})]})},xt=n(440),ft=n(431),Ot=we.a.Title,gt=function(e){var t=e.treeData,n=e.setSelectedScript,a=e.setSelectedScriptPath,c=(e.selectedScript,e.selectedScriptKey),s=Object(r.useState)({showLeafIcon:!1}),o=Object(l.a)(s,2),i=o[0],u=(o[1],Object(r.useState)([c])),d=Object(l.a)(u,2),j=d[0],b=d[1];return Object(p.jsx)(xt.a,{title:Object(p.jsx)(Ot,{level:3,children:"Select Script"}),style:{height:"600px",width:"30%",overflowY:"auto",overflowX:"auto",position:"relative",margin:0,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.26)",borderRadius:"6px",padding:"1rem",background:"white"},children:Object(p.jsx)(ft.a,{showLine:i,defaultExpandAll:!0,onSelect:function(e,t){n(t.node.title),a(t.node.value),b(e)},treeData:t,selectedKeys:j})})},mt=n(138),vt=n(169),yt=n(429),kt=q.b.div(nt||(nt=Object(b.a)(["\n  display: flex;\n  margin-bottom: 3%;\n"]))),St=q.b.div(at||(at=Object(b.a)(["\n  font-size: large;\n  margin: auto 5px auto 0px;\n"]))),wt="HH:mm",Dt=we.a.Title,It=mt.a.Option,Ut=function(e){var t=e.data,n=e.type,a=e.selectedScript,c=e.selectedScriptPath,s=e.setUserData,o=e.setIsLoggedIn,i=e.setUserRole,d=e.groupData,j=Object(r.useState)(0!==t.length?t[0].name:""),b=Object(l.a)(j,2),h=b[0],x=b[1],f=Object(r.useState)(0!==t.length?t[0].dayindex:[]),O=Object(l.a)(f,2),g=O[0],m=O[1],k=Object(r.useState)(0!==t.length?t[0].frequency:"By day"),S=Object(l.a)(k,2),w=S[0],D=S[1],I=Object(r.useState)(0!==t.length?t[0].timesetting:"00:00"),C=Object(l.a)(I,2),L=C[0],T=C[1],A=Object(r.useState)(0!==t.length?t[0].department:""),B=Object(l.a)(A,2),z=B[0],E=B[1],N=Object(r.useState)(0!==t.length?t[0].group:""),F=Object(l.a)(N,2),M=F[0],V=F[1],P=function(e,t){T(""!==t?t:"00:00")};function _(e){m(e)}for(var G=Object(u.g)(),H=function(){var e=Object(ee.a)(Z.a.mark((function e(r){var l,u,d,j;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=v(),u={headers:{authorization:"Bearer ".concat(l)}},""!==a){e.next=6;break}Ce.b.warning("\u8acb\u9078\u64c7Script"),e.next=41;break;case 6:if(""!==h){e.next=10;break}Ce.b.warning("\u8acb\u8f38\u5165Description Name"),e.next=41;break;case 10:if(""!==z){e.next=14;break}Ce.b.warning("\u8acb\u9078\u64c7Department\u540d\u7a31"),e.next=41;break;case 14:if(""!==M){e.next=18;break}Ce.b.warning("\u8acb\u9078\u64c7Group\u540d\u7a31(\u82e5\u7121Group\u9078\u9805\u8acb\u6d3d\u7ba1\u7406\u54e1)"),e.next=41;break;case 18:if("add"!==n){e.next=31;break}return d={name:h,script:a,frequency:w,scriptpath:c,dayindex:"By day"===w?[]:g,timesetting:L,department:z,group:M},e.prev=20,e.next=23,U.post("",d,u).then((function(e){"edit"===n?Ce.b.success("\u4fee\u6539\u6210\u529f"):Ce.b.success("\u65b0\u589e\u6210\u529f"),G.push("/scheduler")})).catch((function(e){Ce.b.error("\u65b0\u589e\u7570\u5e38!"+e),console.log(e),401===e.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),s(null),o(!1),i(null),G.push("/"))}));case 23:e.next=29;break;case 25:e.prev=25,e.t0=e.catch(20),Ce.b.error("\u65b0\u589e\u7570\u5e38("+e.t0+")\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),console.log(e.t0);case 29:e.next=41;break;case 31:return j={id:t[0].id,name:0!==t.length?t[0].name:"",editname:h,script:a,frequency:w,scriptpath:c,dayindex:"By day"===w?[]:g,timesetting:L,department:z,group:M},e.prev=32,e.next=35,R.post("",j,u).then((function(e){"edit"===n?Ce.b.success("\u4fee\u6539\u6210\u529f"):Ce.b.success("\u65b0\u589e\u6210\u529f"),G.push("/scheduler")})).catch((function(e){Ce.b.error("\u65b0\u589e\u7570\u5e38!"+e),console.log(e),401===e.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),s(null),o(!1),i(null),G.push("/"))}));case 35:e.next=41;break;case 37:e.prev=37,e.t1=e.catch(32),Ce.b.error("\u65b0\u589e\u7570\u5e38("+e.t1+")\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),console.log(e.t1);case 41:case"end":return e.stop()}}),e,null,[[20,25],[32,37]])})));return function(t){return e.apply(this,arguments)}}(),W=[],Y=1;Y<32;Y++)W.push(Object(p.jsx)(It,{children:Y.toString()},Y.toString()));return Object(p.jsxs)(xt.a,{title:Object(p.jsx)(Dt,{level:3,children:"Script Schedule Setting"}),style:{width:"60%",paddingRight:"50px",paddinLeft:"50px",paddingBottom:"50px",position:"relative",margin:0,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.26)",borderRadius:"6px",padding:"1rem",overflow:"hidden",background:"white",overflowY:"auto"},children:[Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsx)("h3",{style:{flexGrow:.5},children:"Department"}),Object(p.jsx)("h3",{style:{flexGrow:.5},children:"Group"})]}),Object(p.jsxs)("div",{style:{marginBottom:"7%",display:"flex"},children:[Object(p.jsx)(mt.a,{placeholder:"department",size:"large",style:{flexGrow:.5,border:"0.1px solid lightgray"},onChange:function(e){E(e)},value:z,children:d.map((function(e){return Object(p.jsx)(It,{value:e.departmentname,children:e.departmentname})}))}),Object(p.jsx)(mt.a,{placeholder:"group",size:"large",style:{flexGrow:.5,border:"0.1px solid lightgray"},onChange:function(e){V(e)},value:M,children:d.filter((function(e){return e.departmentname===z&&""!==z})).map((function(e){return e.grouplist.map((function(e){return Object(p.jsx)(It,{value:e,children:e})}))}))})]}),Object(p.jsx)("h3",{children:"Description Name"}),Object(p.jsx)("div",{style:{marginBottom:"7%"},children:Object(p.jsx)(pe.a,{size:"large",addonBefore:"Description Name",placeholder:"Please input description name",value:h,onChange:function(e){return x(e.target.value)}})}),Object(p.jsx)("h3",{children:"Frequency"}),Object(p.jsx)("div",{style:{marginBottom:"7%"},children:Object(p.jsxs)(vt.a.Group,{onChange:function(e){D(e.target.value)},value:w,size:"large",children:[Object(p.jsx)(vt.a,{style:{fontSize:"16px"},value:"By day",children:"By Day"}),Object(p.jsx)(vt.a,{style:{fontSize:"16px"},value:"By week",children:"By Week"}),Object(p.jsx)(vt.a,{style:{fontSize:"16px"},value:"By month",children:"By Month"})]})}),Object(p.jsx)("h3",{children:"Time Setting"}),Object(p.jsxs)("div",{style:{marginBottom:"5%"},children:["By day"===w&&Object(p.jsx)(kt,{children:Object(p.jsx)(yt.a,{style:{flexBasis:"40%"},format:wt,onChange:P,value:ut()(L,wt),size:"large"})}),"By week"===w&&Object(p.jsxs)(kt,{children:[Object(p.jsx)(St,{children:"\u6bcf\u5468\xa0\xa0"}),Object(p.jsxs)(mt.a,{mode:"multiple",placeholder:"",value:g,style:{flexBasis:"50%",border:"1px solid #d9d9d9"},onChange:_,size:"large",optionLabelProp:"label",children:[Object(p.jsx)(It,{value:"1",label:"Mon.",children:"Monday (Mon.)"}),Object(p.jsx)(It,{value:"2",label:"Tue.",children:"Tuesday (Tue.)"}),Object(p.jsx)(It,{value:"3",label:"Wed.",children:"Wednesday (Wed.)"}),Object(p.jsx)(It,{value:"4",label:"Thur.",children:"Thursday (Thur.)"}),Object(p.jsx)(It,{value:"5",label:"Fri.",children:"Friday (Fri.)"}),Object(p.jsx)(It,{value:"6",label:"Sat.",children:"Saturday (Sat.)"}),Object(p.jsx)(It,{value:"7",label:"Sun.",children:"Sunday (Sun.)"})]}),"\xa0\xa0",Object(p.jsx)(yt.a,{style:{flexBasis:"35%"},format:wt,onChange:P,value:ut()(L,wt),size:"large"})]}),"By month"===w&&Object(p.jsxs)("div",{style:{marginBottom:"3%",display:"flex",flexWrap:"nowrap"},children:[Object(p.jsx)(St,{children:"\u6bcf\u6708\u7b2c\xa0\xa0"}),Object(p.jsx)(mt.a,{mode:"multiple",style:{flexBasis:"45%",border:"1px solid #d9d9d9"},onChange:_,size:"large",optionLabelProp:"label",value:g,children:W}),Object(p.jsx)(St,{children:"\xa0\xa0\u5929\xa0\xa0\xa0\xa0"}),Object(p.jsx)(yt.a,{style:{flexBasis:"35%"},format:wt,onChange:P,value:ut()(L,wt),size:"large"})]})]}),Object(p.jsxs)("footer",{style:{float:"right"},children:[Object(p.jsx)(Le.a,{size:"large",onClick:function(){return G.push("/scheduler")},style:{backgroundColor:"gray",borderRadius:"5px",color:"white"},children:"Cancel"}),Object(p.jsx)(Le.a,{size:"large",onClick:function(){return H()},style:{backgroundColor:"#1CC153",borderRadius:"5px",color:"white"},disabled:"add"===n&&""===a&&""===h,children:"edit"===n?"Save":"Add Schedule"},"3")]})]})},Rt=function(e){var t=e.title;return Object(p.jsx)(He.a,{style:{width:"90%",margin:"auto"},onBack:function(){return window.history.back()},title:Object(p.jsx)("h2",{children:t}),children:Object(p.jsx)(We.b,{size:"small",column:2,children:Object(p.jsx)(We.b.Item,{children:Object(p.jsx)(qe,{title:t})})})})},Ct=Se(Ut),Lt=function(e){var t=[],n=Object(r.useState)(),a=Object(l.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)(""),i=Object(l.a)(o,2),u=i[0],d=i[1],j=Object(r.useState)(""),b=Object(l.a)(j,2),h=b[0],x=b[1],f=Object(r.useState)(""),O=Object(l.a)(f,2),g=O[0],m=(O[1],Je(L)),y=Object(l.a)(m,1)[0];return y&&(t=y.children),Object(r.useEffect)((function(){(function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,n,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v(),n={headers:{authorization:"Bearer ".concat(t)}},e.prev=2,e.next=5,T.get("",n);case 5:(a=e.sent).data&&s(a.data.departmentlist),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(p.jsxs)("div",{style:{width:"90%"},children:[Object(p.jsx)(Rt,{title:"Scheduler-Add",back:!0}),Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"center",height:"600px",width:"100%"},children:[Object(p.jsx)(gt,{treeData:t,setSelectedScript:d,setSelectedScriptPath:x,selectedScriptKey:g}),Object(p.jsx)(Ct,{isLoading:!c,data:[],type:"add",selectedScript:u,selectedScriptPath:h,setUserData:e.setUserData,setIsLoggedIn:e.setIsLoggedIn,setUserRole:e.setUserRole,groupData:c})]})]})},Tt=Se(Ut),At=function(e){var t=Object(r.useState)(),n=Object(l.a)(t,2),a=n[0],c=n[1],s=[],o=Object(r.useState)(e.location.state.changeData[0].script),i=Object(l.a)(o,2),u=i[0],d=i[1],j=Object(r.useState)(e.location.state.changeData[0].scriptpath),b=Object(l.a)(j,2),h=b[0],x=b[1],f=Je(L),O=Object(l.a)(f,1)[0];return O&&(s=O.children),Object(r.useEffect)((function(){(function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,n,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v(),n={headers:{authorization:"Bearer ".concat(t)}},e.prev=2,e.next=5,T.get("",n);case 5:(a=e.sent).data&&c(a.data.departmentlist),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(p.jsxs)("div",{style:{width:"90%"},children:[Object(p.jsx)(Rt,{title:"Scheduler-Edit",back:!0}),Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"center",height:"600px"},children:[Object(p.jsx)(gt,{treeData:s,setSelectedScript:d,setSelectedScriptPath:x,selectedScript:u,selectedScriptKey:e.location.state.changeData[0].scriptkey}),Object(p.jsx)(Tt,{isLoading:!a,data:e.location.state.changeData,type:"edit",selectedScript:u,selectedScriptPath:h,setUserData:e.setUserData,setIsLoggedIn:e.setIsLoggedIn,setUserRole:e.setUserRole,groupData:a})]})]})},Bt=n(432),zt=n(436),Et=(n(360),Se((function(e){var t=e.editData,n=e.setUseInfo,a=e.ModalOpen,c=e.setModalOpen,s=e.setUserData,o=e.setIsLoggedIn,i=e.setUserRole,d=e.groupInfo,b=Bt.a.useForm(),h=Object(l.a)(b,1)[0];Object(r.useEffect)((function(){h.setFieldsValue(t)}),[t,h,a]);var x=Object(r.useContext)(j),f=Object(r.useState)(!1),O=Object(l.a)(f,2),g=O[0],m=O[1],k=Object(r.useState)(!1),S=Object(l.a)(k,2),w=S[0],D=S[1],I=Object(u.g)(),U=v(),R={headers:{authorization:"Bearer ".concat(U)}},C=function(){var e=Object(ee.a)(Z.a.mark((function e(t){return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.post("",t,R).then((function(e){L(),c(!1)})).catch((function(e){console.log(e),401===e.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),s(null),o(!1),i(null),I.push("/"))}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("",R);case 3:(t=e.sent).data&&(a=t.data.users.map((function(e,t){return e.key=t,e})),n(a)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){"Admin"===t.department?(m(!0),D(!0)):m(!1)}),[t.department,t.role]),Object(p.jsx)(zt.a,{title:"Edit",visible:a,onOk:function(){h.validateFields().then((function(e){C(e)})).catch((function(e){console.log("Validate Failed:",e)}))},okText:"Save",onCancel:function(){c(!1),h.resetFields()},children:Object(p.jsxs)(Bt.a,{form:h,labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",onValuesChange:function(e,t){"Leader"===t.role?D(!0):"Member"===t.role&&D(!1)},children:[Object(p.jsx)(Bt.a.Item,{label:"\u5e33\u865f",name:"account",children:Object(p.jsx)(pe.a,{disabled:!0,size:"middle"})}),Object(p.jsx)(Bt.a.Item,{label:"\u90e8\u9580",name:"department",children:Object(p.jsx)(mt.a,{disabled:"Admin"!==x.Department,className:"select-department",placeholder:"department",style:{width:"50%",border:"1px solid #d9d9d9"},size:"middle",optionLabelProp:"label",children:d.map((function(e){return Object(p.jsx)(mt.a.Option,{value:e.departmentname,children:e.departmentname})}))})}),Object(p.jsx)(Bt.a.Item,{label:"\u6b0a\u9650",name:"role",rules:[{required:!0,message:"\u6b0a\u9650\u70ba\u5fc5\u9078\u9078\u9805!"}],children:Object(p.jsxs)(mt.a,{disabled:g,className:"select-role",placeholder:"role",style:{width:"50%",border:"1px solid #d9d9d9"},size:"middle",optionLabelProp:"label",children:[Object(p.jsx)(mt.a.Option,{value:"Leader",label:"Leader",children:"Leader"}),Object(p.jsx)(mt.a.Option,{value:"Member",label:"Member",children:"Member"})]})}),Object(p.jsx)(Bt.a.Item,{label:"\u7fa4\u7d44",name:"group",rules:[{required:!w,message:"\u7fa4\u7d44\u70ba\u5fc5\u9078\u9078\u9805!"}],children:Object(p.jsx)(mt.a,{placeholder:"Please select group",size:"middle",optionLabelProp:"label",disabled:w,style:{width:200,border:"0.1px solid lightgray"},children:d.filter((function(e){return e.departmentname===t.department&&""!==t.department})).map((function(e){return e.grouplist.map((function(e){return Object(p.jsx)(mt.a.Option,{value:e,label:e,children:e})}))}))})}),Object(p.jsx)(Bt.a.Item,{label:"\u5be9\u6838",name:"check",children:Object(p.jsxs)(vt.a.Group,{optionType:"button",buttonStyle:"solid",size:"middle",children:[Object(p.jsx)(vt.a.Button,{value:!0,children:"\u5df2\u5be9\u6838"}),Object(p.jsx)(vt.a.Button,{value:!1,disabled:t.check,children:"\u5f85\u5be9\u6838"})]})})]})})})));function Nt(e,t,n){return n.indexOf(e)===t}var Ft,Mt=function(e){e.setChangeData;var t,n=e.scheduleData,a=e.setUseInfo,c=e.setUserData,s=e.setIsLoggedIn,o=e.setUserRole,u=(e.setUserDepartment,n.map((function(e){return e.department})).filter(Nt).map((function(e){return{text:e,value:e}}))),d=n.length,j=Object(r.useState)(),b=Object(l.a)(j,2),h=b[0],x=b[1],f=Object(r.useState)(!1),O=Object(l.a)(f,2),g=O[0],m=O[1],y=Object(r.useState)({account:"",department:"",check:!1}),k=Object(l.a)(y,2),S=k[0],w=k[1],D=Object(r.useState)(""),I=Object(l.a)(D,2),U=I[0],R=I[1],C=Object(r.useState)(""),L=Object(l.a)(C,2),T=L[0],A=L[1],B=Object(r.useRef)(null),z=function(e,t,n){t(),R(e[0]),A(n)},E=[Object(i.a)({title:"User ID",dataIndex:"account"},(t="account",{filterDropdown:function(e){var n=e.setSelectedKeys,a=e.selectedKeys,r=e.confirm,c=e.clearFilters;return Object(p.jsxs)("div",{style:{padding:8},children:[Object(p.jsx)(pe.a,{ref:B,placeholder:"Search ".concat(t),value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return z(a,r,t)},style:{marginBottom:8,display:"block"}}),Object(p.jsxs)(Ne.b,{children:[Object(p.jsx)(Le.a,{type:"primary",onClick:function(){return z(a,r,t)},icon:Object(p.jsx)(Pe.a,{}),size:"small",style:{width:90},children:"Search"}),Object(p.jsx)(Le.a,{onClick:function(){return function(e){e(),R("")}(c)},size:"small",style:{width:90},children:"Reset"}),Object(p.jsx)(Le.a,{type:"link",size:"small",onClick:function(){r({closeDropdown:!1}),R(a[0]),A(t)},children:"Filter"})]})]})},filterIcon:function(e){return Object(p.jsx)(Pe.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,n){return n[t]?n[t].toString().toLowerCase().includes(e.toLowerCase()):""},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return B.current.select()}),100)},render:function(e){return T===t?Object(p.jsx)(Ve.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[U],autoEscape:!0,textToHighlight:e?e.toString():""}):e}})),{title:"Department",dataIndex:"department",filters:u,onFilter:function(e,t){return 0===t.department.indexOf(e)}},{title:"Role",dataIndex:"role",filters:[{text:"Leader",value:"Leader"},{text:"Member",value:"Member"}],onFilter:function(e,t){return 0===t.role.indexOf(e)}},{title:"Group",dataIndex:"group"},{title:"Check",dataIndex:"check",render:function(e,t){return e?Object(p.jsx)("div",{style:{color:"blue"},children:"\u5df2\u5be9\u6838"}):Object(p.jsx)("div",{style:{color:"red"},children:"\u5f85\u5be9\u6838"})}},{title:"",dataIndex:"",render:function(e,t){return Object(p.jsx)(Le.a,{onClick:function(e){return function(e,t){m(!0),w(t)}(0,t)},children:"Edit"})}}];return Object(r.useEffect)((function(){var e=v(),t={headers:{authorization:"Bearer ".concat(e)}};(function(){var e=Object(ee.a)(Z.a.mark((function e(){var n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.get("",t);case 3:(n=e.sent).data&&x(n.data.departmentlist),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(Fe.a,{scroll:{x:"100%"},style:{width:"90%",margin:"auto",textAlign:"center",borderStyle:"solid",borderColor:"lightgrey",borderWidth:"1px",marginBottom:"50px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.26)"},pagination:{position:["bottomCenter"],pageSize:8,total:d,showTotal:function(e){return"Total ".concat(e," members")}},columns:E,dataSource:n,rowKey:function(e){return e.key}}),Object(p.jsx)(Et,{isLoading:!h,editData:S,ModalOpen:g,setModalOpen:m,setUseInfo:a,setUserData:c,setIsLoggedIn:s,setUserRole:o,groupInfo:h})]})},Vt=function(e){var t,n=e.title,a=Object(r.useContext)(j);return Object(p.jsxs)(Ke.a,{children:[Object(p.jsx)(Ke.a.Item,{children:Object(p.jsx)(d.c,{to:"/",children:"Home"})}),"Recent Reports"!==n&&Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Ke.a.Item,{overlay:(t=a.Role,Object(p.jsxs)(Ye.a,{children:[Object(p.jsx)(Ye.a.Item,{children:Object(p.jsx)(d.c,{to:"/scheduler",children:"Scheduler"})}),Object(p.jsx)(Ye.a.Item,{children:Object(p.jsx)(d.c,{to:"/report",children:"Report"})}),"Admin"===t&&Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Ye.a.Item,{children:Object(p.jsx)(d.c,{to:"/authority",children:"Authority"})})})]})),children:[" ",Object(p.jsx)(d.c,{to:"/authority",children:"Authority"})]}),"Group Setting"===n&&Object(p.jsx)(Ke.a.Item,{children:"Group Setting"}),"Auth Setting"===n&&Object(p.jsx)(Ke.a.Item,{children:"Auth Setting"})]})]})},Pt=function(e){var t=e.title;e.back;return Object(p.jsx)(He.a,{style:{width:"50%",margin:"auto auto auto 5em"},title:Object(p.jsx)("h2",{children:t}),children:Object(p.jsx)(We.b,{size:"small",column:2,children:Object(p.jsx)(We.b.Item,{children:Object(p.jsx)(Vt,{title:t})})})})},_t=n(437),Gt=function(e){var t=e.json,n=e.chooseGroup,a=e.setUseInfo,c=e.chooseDepartment,s=e.setUserData,o=e.setIsLoggedIn,d=e.setUserRole,b=e.setUserDepartment,h=Object(u.g)(),x=Object(r.useContext)(j),f=[];t.forEach((function(e){e.groupchosen&&f.push(e.key)}));var O=Object(r.useState)(f),g=Object(l.a)(O,2),k=g[0],S=g[1],w=""!==n?t.filter((function(e){return(e.group===n||""===e.group)&&e.department===c&&"Leader"!==e.role&&"Admin"!==e.department})):t.filter((function(e){return"Leader"!==e.role&&"Admin"!==e.department&&e.department===c})),D=function(){var e=Object(ee.a)(Z.a.mark((function e(t,n,a){var r,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v(),c={headers:{authorization:"Bearer ".concat(r)}},e.prev=2,e.next=5,P.post("",t,c);case 5:e.sent.data.result?(Ce.b.info("\u8a2d\u5b9a\u6210\u529f"),I()):Ce.b.warning("\u8a2d\u5b9a\u5931\u6557\uff0c\u8acb\u7a0d\u7b49\u518d\u91cd\u8a66\u4e00\u6b21"),e.next=21;break;case 9:if(e.prev=9,e.t0=e.catch(2),console.log(e.t0),401!==e.t0.response.status){e.next=21;break}return e.prev=13,e.next=16,E.post("",{refreshtoken:x.UserData.RefreshToken},c).then((function(e){m(e.data.AccessToken)})).catch((function(e){401===e.response.status&&(y(),s(null),o(!1),b(null),d(null),h.push("/"),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"))}));case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(13),console.log(e.t1);case 21:case"end":return e.stop()}}),e,null,[[2,9],[13,18]])})));return function(t,n,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,n,r,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v(),n={headers:{authorization:"Bearer ".concat(t)}},e.prev=2,e.next=5,M.get("",n);case 5:(r=e.sent).data&&(c=r.data.users.map((function(e,t){return e.key=t,e})),a(c)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:""!==n?Object(p.jsx)(_t.a,{style:{width:"90%",margin:"auto",paddingLeft:"20px"},dataSource:w,showSearch:!0,listStyle:{width:"100%",height:450},titles:["\u672a\u9078\u7fa4","\u5df2\u9078\u7fa4"],operations:["to right","to left"],targetKeys:""!==n?k:[],onChange:function(e,a,r){S(e),r.forEach((function(e){var r=t.findIndex((function(t){return t.key===e}));if("right"===a){if(-1!==r){var c=Object(i.a)(Object(i.a)({},t[r]),{},{group:n,groupchosen:!0});D(c)}}else if(-1!==r){var s=Object(i.a)(Object(i.a)({},t[r]),{},{group:"",groupchosen:!1});D(s)}}))},render:function(e){return"".concat(e.account)}}):Object(p.jsx)("h1",{style:{width:"90%",textAlign:"center"},children:"\u8acb\u9078\u64c7\u5de6\u5074\u90e8\u9580"})})},Ht=function(e){var t=e.scheduleData,n=[],a=[];return t.map((function(e,t){e.key=t,e.title=e.account,e.groupchosen&&n.push(e.key);var r=a.findIndex((function(t){return t.dep===e.department}));-1===r?a.push({dep:e.department,group:[e.group]}):-1===a[r].group.findIndex((function(t){return t===e.group}))&&a[r].group.push(e.group);return e})),Object(p.jsxs)("div",{style:{float:"right",margin:"auto auto 3em auto",justifyContent:"space-between",marginRight:"5%"},children:[Object(p.jsx)(d.c,{to:{pathname:"/groupsetting",state:a},children:Object(p.jsx)(Le.a,{children:"Group Setting"})}),Object(p.jsx)(d.c,{to:{pathname:"/authsetting",state:{dep:a,target:n,userInfo:t}},children:Object(p.jsx)(Le.a,{children:"Auth Setting"})})]})},Wt=Se(Mt),Yt=Se(Ht),Kt=function(e){var t=e.setUserData,n=e.setIsLoggedIn,a=e.setUserRole,c=e.setUserDepartment,s=Object(r.useState)([]),o=Object(l.a)(s,2),i=(o[0],o[1]),d=Object(r.useState)(),b=Object(l.a)(d,2),h=b[0],x=b[1],f=Object(r.useContext)(j),O=Object(u.g)();return Object(r.useEffect)((function(){var e=v(),r={headers:{authorization:"Bearer ".concat(e)}};(function(){var e=Object(ee.a)(Z.a.mark((function e(){var s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.get("",r);case 3:(s=e.sent).data&&(o=s.data.users.map((function(e,t){return e.key=t,e})),x(o)),e.next=19;break;case 7:if(e.prev=7,e.t0=e.catch(0),console.log(e.t0),401!==e.t0.response.status){e.next=19;break}return e.prev=11,e.next=14,E.post("",{refreshtoken:f.UserData.RefreshToken},r).then((function(e){m(e.data.AccessToken)})).catch((function(e){401===e.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),t(null),n(!1),c(null),a(null),O.push("/"))}));case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(11),console.log(e.t1);case 19:case"end":return e.stop()}}),e,null,[[0,7],[11,16]])})));return function(){return e.apply(this,arguments)}})()()}),[t,O,n,a,c,f.UserData.RefreshToken]),Object(p.jsxs)("div",{style:{width:"90%"},children:[Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsx)(Pt,{title:"Authority",back:!1}),Object(p.jsx)(Yt,{isLoading:!h,scheduleData:h})]}),Object(p.jsx)(Wt,{isLoading:!h,setChangeData:i,scheduleData:h,setUseInfo:x,setUserData:t,setIsLoggedIn:n,setUserRole:a,setUserDepartment:c})]})},qt=mt.a.Option,Xt=Object(q.b)((function(e){return Object(p.jsx)(f.a,{style:{margin:"0.5rem 0.5rem"},icon:O.a,size:"1x"})}))(Ft||(Ft=Object(b.a)(["\n  padding: 8px;\n  border: 1px solid #d9d9d9;\n  //border-right: none;\n  border-bottom-left-radius: 2px;\n  border-top-left-radius: 2px !important;\n  background: #fff;\n  //padding: 0.15rem 0.25rem;\n"]))),Jt=function(e,t){switch(t.type){case"CHANGE":return Object(i.a)(Object(i.a)({},e),{},{value:t.val,isValid:!0});default:return e}},Qt=function(e){var t=Object(r.useReducer)(Jt,{value:e.initialValue||void 0,isValid:!0}),n=Object(l.a)(t,2),a=n[0],c=n[1],s=e.id,o=e.onInput,i=(e.className,a.value),u=a.isValid;Object(r.useEffect)((function(){o(s,i,u)}),[s,u,o,i]);return Object(p.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%",margin:"1.5rem 0",padding:"3px 6px",border:"1px solid #d9d9d9",borderBottomLeftRadius:"2px",borderTopLeftRadius:"2px !important",background:"#fff"},children:[Object(p.jsx)(Xt,{}),Object(p.jsx)(mt.a,{id:"department",style:{width:"100%",textAlign:"left",fontSize:"0.98rem",borderLeft:"none"},value:a.value,placeholder:"\u8acb\u9078\u64c7\u6240\u5728\u90e8\u9580",onChange:function(e){c({type:"CHANGE",val:e,validators:!0})},children:e.groupData.map((function(e){return Object(p.jsx)(qt,{value:e.departmentname,children:e.departmentname})}))})]})},$t=function(){var e=Object(r.useContext)(j),t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),o=Object(l.a)(s,2),i=o[0],u=o[1],b=Object(r.useState)(""),h=Object(l.a)(b,2),x=h[0],f=h[1],O=me({account:{value:"",isValid:!1},password:{value:"",isValid:!1},department:{value:"",isValid:!0}},!1),g=Object(l.a)(O,2),m=g[0],v=g[1],y=Object(r.useState)([]),k=Object(l.a)(y,2),S=k[0],w=k[1];Object(r.useEffect)((function(){(function(){var e=Object(ee.a)(Z.a.mark((function e(){var t;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.get("");case 3:(t=e.sent).data&&w(t.data.departmentlist),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var D=function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n,a,r,s,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=m.inputs,a=n.account,r=n.password,s=n.department,o={account:a.value,password:r.value,department:s.value},e.prev=3,e.next=6,N.post("/",o);case 6:e.sent.data?u("\u8a3b\u518a\u6210\u529f\uff0c\u8acb\u7b49\u5f85\u5be9\u6838"):(f("\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),setTimeout((function(){f("")}),3e3),c(!1)),e.next=16;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),f("\u8a3b\u518a\u5931\u6557\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66"),setTimeout((function(){f("")}),3e3),c(!1);case 16:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),I=Object(r.useState)(0),U=Object(l.a)(I,2),R=U[0],C=U[1];return Object(r.useEffect)((function(){var t;return R>=10&&(c(!1),e.login("Admin"),t=setTimeout((function(){C(0)}),1e4)),function(){clearTimeout(t)}}),[R,e]),Object(p.jsxs)(te,{className:"register",children:[Object(p.jsx)("img",{src:De,alt:"",style:{width:"50%",paddingTop:"5%"}}),Object(p.jsx)(we.a,{component:"h3",variant:"h5",children:"Engineering Data Analysis"}),Object(p.jsx)("h2",{onClick:function(e){C(R+1)},children:"\u8a3b\u518a\u4ecb\u9762"}),i&&Object(p.jsx)("h4",{className:"authentication__success",children:i}),x&&Object(p.jsx)("h4",{className:"authentication__error",children:x}),a?Object(p.jsx)(ke,{}):Object(p.jsxs)("form",{className:"authentication__form",onSubmit:D,children:[Object(p.jsx)(xe,{id:"account",type:"text",element:"input",validators:[oe(),ie(3)],onInput:v,placeholder:"\u8acb\u8f38\u5165\u5e33\u865f"}),Object(p.jsx)(xe,{id:"password",type:"password",element:"input",validators:[oe(),ie(3)],onInput:v,placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc"}),Object(p.jsx)(Qt,{id:"department",onInput:v,groupData:S}),Object(p.jsx)(fe,{className:"authentication__form__login",type:"submit",disabled:!m.isValid,children:"\u8a3b\u518a"}),Object(p.jsx)(d.b,{to:"/",children:Object(p.jsx)("p",{children:"\u6211\u8981\u767b\u5165"})})]})]})},Zt=n(438),en=function(){return Object(p.jsx)(xt.a,{style:{width:"50%",backgroundColor:"rgba(255,255,255,0.5)"},children:Object(p.jsx)(Zt.a,{status:"404",title:"404",subTitle:"Sorry, the page you visited does not exist.",extra:Object(p.jsx)(d.c,{to:"/",children:Object(p.jsx)(Le.a,{type:"primary",children:"Back Home"})})})})},tn=function(){return Object(p.jsx)(xt.a,{style:{width:"50%",backgroundColor:"rgba(255,255,255,0.5)"},children:Object(p.jsx)(Zt.a,{status:"403",title:"401",subTitle:"Sorry, you are not authorized to access this page.",extra:Object(p.jsx)(d.c,{to:"/",children:Object(p.jsx)(Le.a,{type:"primary",children:"Back Home"})})})})},nn=n(168),an=n(127),rn=n(71),cn=n(435),sn=n(236),on=n.n(sn),ln=function(e){var t=e.repoData,n=e.minValue,a=e.maxValue,c=Object(r.useState)(!1),s=Object(l.a)(c,2),o=s[0],i=(s[1],Object(r.useRef)(null)),u=Object(r.useState)({}),d=Object(l.a)(u,2),j=(d[0],d[1]);return Object(p.jsx)("div",{style:{width:"90%",margin:"auto"},children:Object(p.jsx)(an.a,{gutter:[24,24],children:t&&t.length>0&&t.slice(n,a).map((function(e,t){return Object(p.jsx)(rn.a,{span:8,children:Object(p.jsx)("a",{href:e.HtmlPath,target:"_blank",rel:"noreferrer noopener",children:Object(p.jsx)(xt.a,{loading:o,style:{flexDirection:"row",width:"100%",flexWrap:"wrap"},hoverable:!0,children:Object(p.jsxs)(cn.a,{loading:o,active:!0,style:{height:"350px",width:"100%"},children:[Object(p.jsx)("img",{style:{height:"300px",width:"100%"},alt:"example",src:e.Path,ref:i,onLoad:function(e){j({height:e.target.naturalHeight,width:e.target.naturalWidth})}}),Object(p.jsx)(on.a,{style:{marginTop:"20px"},title:e.ReportName,description:e.TimeStamp})]})},t+"-card")})},t+"-col")}))})})},un=n(448),dn=function(e){var t=e.setRecentReportDays,n=e.setFetchData,a=e.recentReportDays,c=e.setUserData,s=e.setIsLoggedIn,o=e.setUserRole,i=(e.setUserDepartment,Object(r.useContext)(j),Object(u.g)()),l=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,r,l,u;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v(),r={headers:{authorization:"Bearer ".concat(t)}},e.prev=2,e.next=5,D(a).get("",r);case 5:(l=e.sent).data&&(u=l.data.ReportList.map((function(e,t){return e.key=t,e})),n(u)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),401===e.t0.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),c(null),s(!1),o(null),i.push("/"));case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{style:{float:"right",margin:"auto auto 3em auto",justifyContent:"space-between",marginRight:"5%"},children:[Object(p.jsxs)(vt.a.Group,{defaultValue:"30",buttonStyle:"solid",onChange:function(e){t(e.target.value)},children:[Object(p.jsx)(vt.a.Button,{value:"7",children:"7 days"}),Object(p.jsx)(vt.a.Button,{value:"14",children:"14 days"}),Object(p.jsx)(vt.a.Button,{value:"30",children:"1 month"}),Object(p.jsx)(vt.a.Button,{value:"90",children:"3 month"})]}),Object(p.jsx)(Le.a,{type:"default",style:{marginLeft:"20px"},icon:Object(p.jsx)(un.a,{}),onClick:function(){return l()}})]})},jn=Se((function(e){var t=e.repoData,n=e.setRecentReportDays,a=e.setFetchData,c=e.recentReportDays,s=e.setUserData,o=e.setIsLoggedIn,i=e.setUserRole,u=e.setUserDepartment,d=Object(r.useState)([]),j=Object(l.a)(d,2),b=j[0],h=(j[1],Object(r.useState)(0)),x=Object(l.a)(h,2),f=x[0],O=x[1],g=Object(r.useState)(6),m=Object(l.a)(g,2),v=m[0],y=m[1],k=t.length/6+1;return Object(p.jsxs)("div",{style:{width:"90%"},children:[Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsx)(et,{title:"Recent Reports",back:!1}),Object(p.jsx)(dn,{changeData:b,setRecentReportDays:n,setFetchData:a,recentReportDays:c,setUserData:s,setIsLoggedIn:o,setUserRole:i,setUserDepartment:u})]}),Object(p.jsx)(ln,{repoData:t,minValue:f,maxValue:v}),Object(p.jsx)(nn.a,{defaultCurrent:1,total:k,onChange:function(e){O(6*(e-1)),y(6*e)},style:{textAlign:"center",padding:"5%"}})]})})),bn=function(e,t){var n=t.setUserData,a=t.setIsLoggedIn,c=t.setUserRole,s=t.setUserDepartment,o=Object(r.useContext)(j),i=Object(u.g)(),d=Object(r.useState)(30),b=Object(l.a)(d,2),h=b[0],x=b[1],f=Object(r.useState)(),O=Object(l.a)(f,2),g=O[0],m=O[1];return Object(r.useEffect)((function(){var e=v(),t={headers:{authorization:"Bearer ".concat(e)}},r=function(){var e=Object(ee.a)(Z.a.mark((function e(){var r,o;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D(h).get("",t);case 3:(r=e.sent).data&&(o=r.data.ReportList.map((function(e,t){return e.key=t,e})),m(o)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),n(null),a(!1),c(null),s(null),i.push("/"));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();null!==o.Role&&r()}),[h,o.Role,n,a,c,s,i]),Object(p.jsx)(jn,{isLoading:!g,repoData:g,setRecentReportDays:x,setFetchData:m,recentReportDays:h,setUserData:n,setIsLoggedIn:a,setUserRole:c,setUserDepartment:s})},pn=n(170),hn=n(195),xn=n(449),fn=function(e){e.title;var t=e.dep,n=e.setGroupInfo,a=e.setUserData,c=e.setIsLoggedIn,s=e.setUserRole,o=e.setUserDepartment,i=void 0!==t.grouplist?t.grouplist.map((function(e){return{key:e,group:e}})):[],d=Object(r.useState)(!1),j=Object(l.a)(d,2),b=j[0],h=j[1],x=Object(r.useState)(""),f=Object(l.a)(x,2),O=f[0],g=f[1],m=Object(r.useState)(i),k=Object(l.a)(m,2),S=(k[0],k[1],Object(r.useState)(!1)),w=Object(l.a)(S,2),D=w[0],I=w[1],U=Object(r.useState)(""),R=Object(l.a)(U,2),C=R[0],L=R[1],T=Object(r.useState)(""),A=Object(l.a)(T,2),B=A[0],z=A[1],E=Object(u.g)(),N=[{title:"Group",dataIndex:"group",key:"name",width:"70%"},{title:"Action",key:"action",width:"30%",render:function(e,t){return Object(p.jsxs)(Ne.b,{size:"middle",children:[Object(p.jsx)("a",{onClick:function(){I(!0),L(t.group),z(t.group)},children:"Edit"}),Object(p.jsx)(Te.a,{placement:"topLeft",title:"\u662f\u5426\u78ba\u5b9a\u522a\u9664".concat(t.group,"?(\u8207\u8a72\u7fa4\u7d44\u76f8\u95dcReport\u6703\u5168\u90e8\u522a\u9664)"),onConfirm:function(e){return F(e,t)},okText:"\u78ba\u5b9a",cancelText:"\u53d6\u6d88",children:Object(p.jsx)("a",{children:"Delete"})})]})}}],F=function(e,n){var a=t.grouplist.findIndex((function(e){return e===n.group}));if(-1!==a){var r={grouplist:t.grouplist.splice(a,1),departmentname:t.departmentname};M(r)}},M=function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(),a={headers:{authorization:"Bearer ".concat(n)}},e.prev=2,e.next=5,W.post("",t,a);case 5:e.sent.data.result&&K(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),P=function(){h(!1),g(""),I(!1)},_=function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v(),a={headers:{authorization:"Bearer ".concat(n)}},t.group!==t.newgroupname){e.next=6;break}Ce.b.warning("Did not change the group name."),e.next=16;break;case 6:return e.prev=6,e.next=9,H.post("",t,a);case 9:e.sent.data.result&&(K(),I(!1)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(),r={headers:{authorization:"Bearer ".concat(n)}},e.prev=2,e.next=5,G.post("",t,r);case 5:e.sent.data.result&&(K(),I(!1)),e.next=19;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),a(null),c(!1),s(null),o(null),E.push("/");case 19:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v(),a={headers:{authorization:"Bearer ".concat(t)}},e.prev=2,e.next=5,V.get("",a);case 5:(r=e.sent).data&&n(r.data.departmentlist),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)(Bt.a,{name:"dynamic_form_nest_item",onFinish:function(e){console.log("Received values of form:",e)},autoComplete:"off",style:{width:"100%",margin:"auto"},children:[Object(p.jsx)(Fe.a,{columns:N,dataSource:i,pagination:!1}),Object(p.jsx)(Bt.a.List,{name:"users",children:function(e){return Object(p.jsx)(Le.a,{type:"dashed",onClick:function(){return h(!0)},block:!0,icon:Object(p.jsx)(Ae.a,{}),children:"Add group"})}})]}),Object(p.jsx)(zt.a,{title:"Add Group",width:400,visible:b,onOk:function(){t.grouplist.concat([O]);var e={grouplist:[O],departmentname:t.departmentname};Y(e),P()},onCancel:P,closable:!1,children:Object(p.jsx)(pe.a,{size:"large",placeholder:"Please input new group name.",prefix:Object(p.jsx)(xn.a,{}),value:O,onChange:function(e){return g(e.target.value)}})}),Object(p.jsx)(zt.a,{title:"Edit Group",width:400,visible:D,onOk:function(){var e={group:B,newgroupname:C,departmentname:t.departmentname};_(e)},onCancel:P,closable:!1,children:Object(p.jsx)(pe.a,{size:"large",placeholder:"Please rename group name.",prefix:Object(p.jsx)(xn.a,{}),value:C,onChange:function(e){return L(e.target.value)}})})]})},On=hn.a.TabPane,gn=Se(fn),mn=function(e){var t=e.title;e.back;return Object(p.jsx)(He.a,{style:{width:"50%",margin:"auto auto auto 5em"},onBack:function(){return window.history.back()},title:Object(p.jsx)("h2",{children:t}),children:Object(p.jsx)(We.b,{size:"small",column:2,children:Object(p.jsx)(We.b.Item,{children:Object(p.jsx)(Vt,{title:t})})})})},vn=Se((function(e){e.dep;var t=e.groupInfo,n=e.setGroupInfo,a=e.pane,s=e.setPane,o=e.setUserData,i=e.setIsLoggedIn,d=e.setUserRole,j=e.setUserDepartment,b=e.department,h=Object(u.g)(),x=Object(r.useState)(0!==a.length?a[0].key:0),f=Object(l.a)(x,2),O=f[0],g=f[1],m=Object(r.useState)(!1),k=Object(l.a)(m,2),S=k[0],w=k[1],D=Object(r.useState)(""),I=Object(l.a)(D,2),U=I[0],R=I[1],C=function(e){var t;a.forEach((function(n,a){n.key===e&&(t=a-1)}));var n=a.filter((function(t){return t.key!==e}));n.length&&O===e&&g(t>=0?n[t].key:n[0].key),s(n)},L=function(){w(!1),R("")},T=function(){var e=Object(ee.a)(Z.a.mark((function e(t){var n,a;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v(),a={headers:{authorization:"Bearer ".concat(n)}},e.prev=2,e.next=5,_.post("",t,a);case 5:e.sent.data.result&&A(),e.next=19;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),y(),o(null),i(!1),d(null),j(null),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),h.push("/");case 19:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,a,r,c;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v(),a={headers:{authorization:"Bearer ".concat(t)}},e.prev=2,e.next=5,V.get("",a);case 5:(r=e.sent).data&&(c=r.data.departmentlist.filter((function(e){return"Admin"!==e.departmentname})).map((function(e,t){var n=String(t+1);return{title:e.departmentname,key:n}})),s(c),n(r.data.departmentlist)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0.response);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}(),B=c.a.useMemo((function(){return"Admin"!==b?null:Object(p.jsx)(Le.a,{onClick:function(){return w(!0)},children:"ADD"})}),[b]);return Object(p.jsxs)("div",{style:{width:"90%",margin:"auto"},children:[Object(p.jsx)(hn.a,{style:{borderStyle:"solid",padding:"20px",borderColor:"lightgray",height:"65vh",borderRadius:"3px",borderWidth:"0.5px",boxShadow:"0 3px 7px rgba(0, 0, 0, 0.3)",overflowY:"auto"},hideAdd:!0,size:"large",onChange:function(e){g(e)},activeKey:O,onEdit:function(e,t){C(e)},tabPosition:"left",tabBarExtraContent:B,children:a.map((function(e){return Object(p.jsx)(On,{tab:e.title,closable:!1,children:Object(p.jsx)(gn,{isLoading:!t,title:e.title,dep:t.filter((function(t){return t.departmentname===e.title}))[0],setGroupInfo:n,setUserData:o,setIsLoggedIn:i,setUserRole:d,setUserDepartment:j})},e.key)}))}),Object(p.jsx)(zt.a,{title:"Add Department",width:400,visible:S,onOk:function(){var e=Object(pn.a)(a),t="newTab".concat(e.length+1);e.push({title:U,content:U+"Pane",key:t+"dep"}),T({grouplist:[],departmentname:U}),L()},onCancel:L,closable:!1,children:Object(p.jsx)(pe.a,{size:"large",placeholder:"Please input new department name.",prefix:Object(p.jsx)(xn.a,{}),value:U,onChange:function(e){return R(e.target.value)}})})]})})),yn=function(e){var t=Object(r.useState)(),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useContext)(j),o=Object(u.g)(),i=Object(r.useState)(),d=Object(l.a)(i,2),b=d[0],h=d[1];return Object(r.useEffect)((function(){var t=v(),n={headers:{authorization:"Bearer ".concat(t)}};(function(){var t=Object(ee.a)(Z.a.mark((function t(){var a,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.get("",n);case 3:(a=t.sent).data&&(r=[],0!==a.data.departmentlist.length&&("Admin"===s.Department?r=a.data.departmentlist.filter((function(e){return"Admin"!==e.departmentname&&"Other"!==e.departmentname})).map((function(e,t){var n=String(t+1);return{title:e.departmentname,key:n}})):"Admin"!==s.Department&&"Leader"===s.Role&&(r=a.data.departmentlist.filter((function(e){return e.departmentname===s.Department})).map((function(e,t){var n=String(t+1);return{title:e.departmentname,key:n}})))),h(r),c(a.data.departmentlist)),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.response),401===t.t0.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),e.setUserData(null),e.setIsLoggedIn(!1),e.setUserDepartment(null),e.setUserRole(null),o.push("/"));case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[e,o,s.Department,s.Role]),Object(p.jsxs)("div",{style:{width:"90%"},children:[Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsx)(mn,{title:"Group Setting",back:!0}),Object(p.jsx)(Ht,{scheduleData:e.location.state})]}),Object(p.jsx)(vn,{isLoading:!a,dep:e.location.state,groupInfo:a,setGroupInfo:c,pane:b,setPane:h,setUserData:e.setUserData,setIsLoggedIn:e.setIsLoggedIn,setUserRole:e.setUserRole,setUserDepartment:e.setUserDepartment,department:s.Department})]})},kn=n(450),Sn=Ye.a.SubMenu,wn=Se((function(e){e.dep;var t=e.setChooseGroup,n=e.groupInfo,a=e.setChooseDepartment,c=Object(r.useContext)(j);return Object(p.jsx)(Ye.a,{onClick:function(e){e.item,e.key;var n=e.keyPath;e.domEvent;t(n[0]),a(n[1])},style:{width:256},defaultSelectedKeys:["1"],mode:"inline",children:Object(p.jsxs)(p.Fragment,{children:["Admin"===c.Department&&n.filter((function(e){return"Admin"!==e.departmentname&&"Other"!==e.departmentname})).map((function(e){return Object(p.jsx)(Sn,{icon:Object(p.jsx)(kn.a,{}),title:e.departmentname,children:e.grouplist.map((function(e){return Object(p.jsx)(Ye.a.Item,{children:e},e)}))},e.departmentname)})),"Admin"!==c.Department&&"Leader"===c.Role&&n.filter((function(e){return e.departmentname===c.Department})).map((function(e){return Object(p.jsx)(Sn,{icon:Object(p.jsx)(kn.a,{}),title:e.departmentname,children:e.grouplist.map((function(e){return Object(p.jsx)(Ye.a.Item,{children:e},e)}))},e.departmentname)}))]})})})),Dn=Se(Gt),In=function(e){var t=Object(r.useState)(),n=Object(l.a)(t,2),a=n[0],c=n[1],s=(Object(r.useContext)(j),Object(u.g)()),o=Object(r.useState)(),i=Object(l.a)(o,2),d=(i[0],i[1]),b=Object(r.useState)(),h=Object(l.a)(b,2),x=h[0],f=h[1],O=Object(r.useState)(""),g=Object(l.a)(O,2),m=g[0],k=g[1],S=Object(r.useState)(""),w=Object(l.a)(S,2),D=w[0],I=w[1];return Object(r.useEffect)((function(){var t=v(),n={headers:{authorization:"Bearer ".concat(t)}};(function(){var t=Object(ee.a)(Z.a.mark((function t(){var a,r;return Z.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.get("",n);case 3:(a=t.sent).data&&(r=a.data.users.map((function(e,t){return e.key=t,e})),f(r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),401===t.t0.response.status&&(y(),Ce.b.info("\u9a57\u8b49\u904e\u671f\uff0c\u8acb\u91cd\u65b0\u767b\u5165"),e.setUserData(null),e.setIsLoggedIn(!1),e.setUserRole(null),e.setUserDepartment(null),s.push("/"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}})()()}),[e,s]),Object(r.useEffect)((function(){(function(){var e=Object(ee.a)(Z.a.mark((function e(){var t,n;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.get("");case 3:(t=e.sent).data&&(n=[],0!==t.data.departmentlist.length&&(n=t.data.departmentlist.filter((function(e){return"Admin"!==e.departmentname&&"Other"!==e.departmentname})).map((function(e,t){var n=String(t+1);return{title:e.departmentname,key:n}}))),d(n),c(t.data.departmentlist)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.response);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(p.jsxs)("div",{style:{width:"90%"},children:[Object(p.jsxs)("div",{style:{display:"flex"},children:[Object(p.jsx)(mn,{title:"Auth Setting",back:!0}),Object(p.jsx)(Ht,{scheduleData:e.location.state.dep})]}),Object(p.jsxs)("div",{style:{display:"flex",margin:"auto",borderStyle:"solid",padding:"20px",borderColor:"lightgray",height:"65vh",borderRadius:"3px",borderWidth:"0.5px",boxShadow:"0 3px 7px rgba(0, 0, 0, 0.3)",overflowY:"auto",width:"90%"},children:[Object(p.jsx)(wn,{isLoading:!a,dep:e.location.state.dep,setChooseGroup:k,groupInfo:a,setChooseDepartment:I}),Object(p.jsx)(Dn,{isLoading:!x,json:x,target:e.location.state.target,chooseGroup:m,setUseInfo:f,chooseDepartment:D,setUserData:e.setUserData,setIsLoggedIn:e.setIsLoggedIn,setUserRole:e.setUserRole,setUserDepartment:e.setUserDepartment})]})]})};var Un=function(){var e,t=Object(r.useState)(!1),n=Object(l.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(null),o=Object(l.a)(s,2),b=o[0],h=o[1],x=Object(r.useState)(null),f=Object(l.a)(x,2),O=f[0],g=f[1],m=Object(r.useState)(null),k=Object(l.a)(m,2),S=k[0],w=k[1],D=Object(r.useState)(null),I=Object(l.a)(D,2),U=I[0],R=I[1];return Object(r.useEffect)((function(){var e=!0;return v()?Ie().then((function(t){e&&t&&(R(t.data),w(t.data.AccountName),g(t.data.Role),h(t.data.Department),c(!0))})).catch((function(e){R(null),c(!1),g(null),h(null),w(null),y()})):(R(null),c(!1),g(null),h(null),w(null),y()),function(){e=!1}}),[]),U||(e=Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{exact:!0,path:"/",component:Ue}),Object(p.jsx)(u.b,{exact:!0,path:"/register",children:Object(p.jsx)($t,{})}),Object(p.jsx)(u.b,{path:"/error",exact:!0,component:en}),Object(p.jsx)(u.b,{component:tn})]})),U&&"Admin"===U.Department&&(e=Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{exact:!0,path:"/scheduler",render:function(){return U?Object(p.jsx)($e,{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h}):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/scheduler/add",render:function(){return U?Object(p.jsx)(Lt,{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h}):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/scheduler/edit",render:function(e){return U?Object(p.jsx)(At,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h})):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/report",render:function(e){return U?Object(p.jsx)(ht,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h})):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,replace:!0,path:"/",render:function(){return U?Object(p.jsx)(bn,{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h}):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/authority",render:function(){return U?Object(p.jsx)(Kt,{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h}):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/groupsetting",render:function(e){return U?Object(p.jsx)(yn,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h})):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/authsetting",render:function(e){return U?Object(p.jsx)(In,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h})):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{path:"/error",exact:!0,component:en}),Object(p.jsx)(u.b,{component:en})]})),a&&"Admin"!==b&&(e=Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{exact:!0,path:"/scheduler",children:Object(p.jsx)($e,{})}),Object(p.jsx)(u.b,{exact:!0,path:"/scheduler/add",render:function(e){return U?Object(p.jsx)(Lt,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h})):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/scheduler/edit",render:function(e){return U?Object(p.jsx)(At,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h})):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/report",render:function(e){return Object(p.jsx)(ht,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h}))}}),Object(p.jsx)(u.b,{exact:!0,path:"/",render:function(e){return Object(p.jsx)(bn,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h}))}}),"Leader"===O?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(u.b,{exact:!0,path:"/authority",render:function(){return U?Object(p.jsx)(Kt,{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h}):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/groupsetting",render:function(e){return U?Object(p.jsx)(yn,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h})):Object(p.jsx)(u.a,{exact:!0,to:"/"})}}),Object(p.jsx)(u.b,{exact:!0,path:"/authsetting",render:function(e){return U?Object(p.jsx)(In,Object(i.a)(Object(i.a)({},e),{},{setUserData:R,setIsLoggedIn:c,setUserRole:g,setUserDepartment:h,test:"this is test"})):Object(p.jsx)(u.a,{exact:!0,to:"/"})}})]}):null]})),Object(p.jsx)(j.Provider,{value:{UserData:U,isLoggedIn:a,login:function(e,t,n,a){h(e),R(a),g(t),w(n),c(!0)},logout:function(){c(!1),g(null),w(null),y(),R(null),h(null)},Role:O,UserName:S,Department:b},children:Object(p.jsxs)(d.a,{children:[Object(p.jsx)(Q,{login:a}),Object(p.jsx)("main",{children:e})]})})},Rn=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,451)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};o.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(Un,{})}),document.getElementById("root")),Rn()}},[[425,1,2]]]);
//# sourceMappingURL=main.e8487eaf.chunk.js.map